"use client";

import clsx from "clsx";
import { useId } from "react";
import { ThemeColor } from "../../utils/theme";

/**
 * @see https://coco-factory.jp/ugokuweb/move01/4-1-6/
 */
const maskChildStyle = clsx(
  "fill-none",
  "stroke-white",
  // NOTICE: ここが小さいと文字が欠ける
  ["stroke-[200]", "screen2:stroke-[360]"],
  "[stroke-linecap:round]",
  "[stroke-linejoin:round]",
  "[stroke-miterlimit:10]",
  "[stroke-dasharray:1500]",
  "[stroke-dashoffset:1500]",
);

interface Props {
  ref?: React.Ref<SVGSVGElement>;
  // eslint-disable-next-line react/no-unused-prop-types -- used in willChange
  visible: boolean;
  // eslint-disable-next-line react/no-unused-prop-types -- used in willChange
  ended: boolean;
}

/**
 * @see https://coco-factory.jp/ugokuweb/move01/4-1-6/
 */
export function AnimatedLogo({ ref, visible, ended }: Props) {
  const willChange = ended
    ? undefined
    : { willChange: "stroke-dasharray, stroke-dashoffset" };

  const clipmask = useId();

  return (
    <div
      suppressHydrationWarning
      data-role="animated-logo"
      role="img"
      aria-label="ユードットエフエムのロゴ"
      className={clsx(!visible && "invisible")}
    >
      <svg
        ref={ref}
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        xmlnsXlink="http://www.w3.org/1999/xlink"
        x="0px"
        y="0px"
        width={684}
        height={311 + 84}
        className={clsx(
          "w-[480px]",
          "screen2:w-[684px]",
          "max-w-full",
          "h-auto",
        )}
        viewBox={`0 0 ${684} ${311 + 84}`}
        xmlSpace="preserve"
        mask={`url(#${clipmask})`}
      >
        <svg x={0} y={0} width={254} height={92} viewBox="0 0 423 154">
          <ポッドキャスト百合 fill={ended ? "#000" : "#fff"} />
        </svg>
        {ended && <Blur deviation={30} color="white" />}
        <svg
          xmlnsXlink="http://www.w3.org/1999/xlink"
          x={0}
          y={84}
          width={684}
          height={311}
          viewBox="0 0 1368 622"
        >
          <ユードットエフエム fill={ended ? ThemeColor.Primary : "#fff"} />
        </svg>
        <mask
          suppressHydrationWarning
          id={clipmask}
          maskUnits="objectBoundingBox"
        >
          <path
            className={maskChildStyle}
            d="M124.9,73.4c0,0,57.3-46.5,22.9-66.6c-35.2-20.7-87,8.9-90.1,55.4c-3.1,46.6,48.4,84.2,34.7,130.7
    s-59.6,47.3-79.7,39.8c-20.1-7.4-14.9-75.1,5.8-79.5l147.1,10.8c0,0,39.2-11.3,38.4-31.1c-0.8-19.8-4.4-35.8-13-35.7
    c-25.3,0.3-45.7,63.3-51.4,95.7c-6,34.8,3,35.9,22.5,29c19.5-6.9,102.7-186.4,133.4-79.5c-20-19.8-51.6-34.7-59.9-0.3
    c-8.3,34.4-33.7,68.2-6,68s87-105.9,85.5-98C299.1,153.4,265.3,228,298,221.9c32.7-6.1,74.4-118.2,74.4-118.2
    c4.2,56.7,21.2,122.4,0,133.3c-21.2,10.9-51.2,37.6-47.6,9.6c3.6-27.9,126.1-113.8,131.5-118.6c-16.2,48.5-21.8,70.8-0.3,64.9
    s46.7-83.1,69.7-71.6c22.9,11.5,27.1,16.3,27.1,16.3s-70.8,32-62.3,72.6s143.6-109.4,151.2-147c7.6-37.7,17.8-50.1-10.8-50.1
    c-34.5,0-107.4,268.4-65.2,224c41.9-44.1,140.1-100.1,141.2-124.8c1.1-24.7-11.1-15-25.2-8.5c-14.1,6.5-48.7,31.3-42.3,62.8
    s2.8,66.1,26,55.4s73.6-79.8,73.6-79.8"
            style={willChange}
          />
          <line
            className={maskChildStyle}
            x1="490.5"
            y1="50.6"
            x2="459.9"
            y2="103.6"
            style={willChange}
          />
        </mask>
      </svg>
    </div>
  );
}

const Blur = ({
  id = "blur1",
  deviation,
  color,
}: {
  id?: string;
  deviation: number;
  color: string;
}) => (
  <filter id={id}>
    <feDropShadow dx="0" dy="0" stdDeviation={deviation} floodColor={color} />
  </filter>
);

const ポッドキャスト百合 = ({ fill = "#fff" }) => (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="423"
    height="154"
    fill="none"
    viewBox="0 0 423 154"
  >
    <path
      fill={fill}
      d="M35.005 113.056c-2.981.799-5.707-.855-6.459-3.85-.7-2.805.95-5.733 3.884-6.519 2.887-.774 5.78.937 6.481 3.742.705 3.007-1.066 5.866-3.906 6.627Zm-.612-2.474c1.515-.406 2.608-1.815 2.152-3.519-.406-1.515-2.026-2.45-3.54-2.044-1.61.431-2.451 2.026-2.045 3.54.456 1.704 1.777 2.467 3.433 2.023Zm-10.078 33.949c-1.654.646-3.528.844-5.47-.157-1.943-1.002-1.17-3.796 1.024-3.37 4.774 1.156 4.29-2.164 3.469-5.799-.629-2.723-1.786-7.232-2.734-10.58-6.654 2.24-8.042 3.119-9.84 3.601-2.367.634-3.412-2.13-1.16-3.19 1.405-.63 1.641-.693 10.081-3.462-.507-1.893-.995-3.335-1.375-4.755-.634-2.366 2.912-3.52 3.653-1.131.14.52.464 2.108 1.148 4.664 4.898-1.414 7.772-2.235 8.886-2.432 2.49-.363 3.305 2.868.818 3.433-2.202.489-1.78.173-8.888 2.23 1.04 3.881 2.364 8.447 2.904 10.838.87 4.384 1.531 8.366-2.516 10.11Zm-10.215-.256c-.616 2.245-3.893 1.753-3.637-.699.466-4.133 1.852-8.613 2.806-10.543.964-2.084 4.023-1.078 3.24 1.11-.478 1.245-.924 2.987-1.332 4.872-.333 1.408-.797 4.221-1.077 5.26Zm22.785-9.25c-1.88-1.526-3.666-3.076-5.835-4.169-1.955-1.049-.444-3.737 1.732-3.001 2.953.985 5.603 3.115 6.684 4.5 1.385 1.759-.834 4.079-2.581 2.67Zm35.888-4.645c-.612 2.447-3.741 1.56-3.39-.918.663-4.337 5.169-16.299 7.206-20.244 1.21-2.302 4.56-.968 3.496 1.498-.46.935-1.317 2.281-3.416 7.51-1.778 4.535-2.61 7.295-3.896 12.154Zm-4.97-12.111c-1.444-1.034-2.455-2.538-2.757-4.233-.28-1.802 2.023-2.673 2.694-.925.523 1.382 1.392 2.164 2.153 2.923 1.46 1.283-.466 3.372-2.09 2.235Zm-5.586 2.815c-1.53-1.162-2.488-3.036-2.755-4.791-.198-1.874 2.152-2.758 2.789-.95.5 1.489 1.518 2.637 2.22 3.362 1.523 1.52-.627 3.719-2.254 2.379Zm60.042-31.712c-.958-1.113-1.71-2.028-2.91-2.72-1.633-.984-.193-2.993 1.566-2.297 1.411.535 2.846 1.723 3.611 2.685 1.47 1.888-.706 3.993-2.267 2.332Zm-9.984 31.083c-.457-1.704-2.198-8.39-4.075-15.395-1.242-4.638-2.621-9.596-3.496-12.861-.799-2.982 2.987-3.997 3.811-.92.368 1.372 1.72 7.554 2.38 10.015 4.301-.797 7.98-1.834 9.864-2.186 2.976-.443 3.75 3.205.825 3.837l-9.858 1.83c1.03 4.036 3.422 11.258 4.284 14.476.85 3.171-2.886 4.375-3.735 1.204Zm5.557-27.158c-1.043-1.242-2.127-2.068-2.992-2.648-1.504-1.068-.158-3.052 1.481-2.425 1.149.503 2.785 1.688 3.623 2.732 1.47 1.889-.68 4.088-2.112 2.341Zm49.069 12.927c-.87-1.543-2.355-5-5.13-11.004a294.387 294.387 0 0 0-9.545 4.892c-2.344 1.287-3.803-2.076-1.529-3.243.953-.61 2.697-1.484 9.571-4.797-.434-1.05-1.873-3.962-2.683-5.47-3.262 1.838-4.999 3.115-6.223 3.85-2.107 1.223-3.689-1.65-1.847-3.108.539-.449 3.211-2.027 6.592-3.795-.886-1.792-1.781-3.43-2.398-4.786-.975-2.123 2.328-3.617 3.36-1.66.43.848 1.148 2.583 2.196 4.788 3.044-1.323 4.947-1.985 6.357-2.21 2.619-.449 3.665 3.076 1.131 3.653-.662.177-2.786.391-5.972 1.753.851 1.851 2.018 4.126 2.657 5.375 2.571-1.196 6.991-3.446 9.07-4.206 2.445-.909 3.977 2.536 1.532 3.445-1.843.697-4.796 1.792-9.051 3.896.706 1.688 1.613 3.373 2.389 4.94 1.192 2.369 2.464 4.464 3.072 5.975 1.101 2.596-2.271 4.21-3.549 1.712Zm44.29-13.237c-.797-1.46-3.939-7.315-6.134-11.343-2.943 1.701-3.81 2.44-4.564 2.846-2.211 1.404-4.016-1.359-1.903-2.94.939-.657 3.166-1.812 4.864-2.673-.747-1.27-1.626-2.658-2.091-3.447-1.151-2.025 1.637-3.736 2.879-1.938.402.552 1.228 2.309 2.05 3.864 3.275-1.79 9.053-5.216 11.711-2.681 2.417 2.396-1.696 7.302-3.203 8.873-1.804 1.6-4.05-.538-2.379-2.254 1.998-2.007 3.259-3.36 2.592-4.144-.667-.785-2.329.015-7.142 2.877 2.195 4.028 5.342 9.526 6.237 11.163 1.284 2.142-1.8 3.882-2.917 1.797Zm35.821-8.533c-1.907 2.54-5.296.303-3.235-2.228 2.455-3.143 6.283-8.735 8.252-11.799 4.625-6.972 6.079-11.013 3.868-12.45-1.946-1.203-5.489.152-11.224 3.362-2.554 1.446-4.294-1.639-1.837-3.261 3.409-2.233 11.709-6.283 16.005-3.122 3.213 2.335 2.917 5.965-.969 13.043 5.366 3.179 8.85 5.39 10.143 6.617 2.003 1.796.012 4.968-2.246 3.544-.781-.45-4-3.19-9.759-7.075-5.167 7.98-8.031 12.247-8.998 13.369Zm52.164-14.333c-.457-1.703-2.198-8.39-4.075-15.395-1.243-4.638-2.622-9.595-3.497-12.86-.748-2.793 3.086-3.82 3.859-.933.368 1.372 1.72 7.554 2.38 10.015 4.301-.797 7.933-1.821 9.864-2.187 2.928-.43 3.69 3.171.812 3.79-1.35.26-3.853.576-9.845 1.877 1.03 4.036 3.422 11.258 4.285 14.477.799 2.982-2.985 4.198-3.783 1.216ZM361.66 20.66l-16.377 4.388c.038 2.222-.262 4.89-.534 7.093l11.17-2.993c1.988-.533 3.816.043 4.501 2.599l6.404 23.901c.571 2.13-2.357 3.32-3.341 1.352l-21.346 5.72c.18 2.184-2.998 2.63-3.569.5l-6.417-23.95c-.672-2.508.623-3.92 2.564-4.44l6.437-1.725c.312-2.62.513-4.145.534-7.093l-15.95 4.274c-2.083.558-3.005-2.695-.922-3.253l35.971-9.639c2.082-.558 2.957 2.708.875 3.266Zm-2.599 20.024-2.029-7.573a.723.723 0 0 0-.901-.52L336.3 37.904a.754.754 0 0 0-.52.9l2.029 7.573 21.252-5.694Zm3.5 13.063-2.663-9.94-21.252 5.695 2.664 9.94 21.251-5.695Zm53.013-33.126c-.43 1.992-2.388 1.502-4.367 1.119-6.523-1.245-13.057-3.857-20.582-9.602-3.679 8.798-8.092 14.292-12.748 18.685-1.217 1.138-2.582 2.67-4.023 1.078-.642-.69-.766-1.723.123-2.57 7.163-6.586 11.716-13.64 14.289-21.076.601-1.733 3.148-1.503 3.428.299 5.712 4.658 13.946 8.692 22.166 9.837 1.465.166 1.911 1.264 1.714 2.23Zm-12.552 3.515-16.471 4.413c-2.083.558-3.052-2.682-.923-3.253l16.519-4.426c2.13-.57 3.005 2.695.875 3.266Zm6.589 6.605 3.386 12.637c.571 2.13-2.572 3.276-3.426 1.222l-18.933 5.073c.24 2.219-3.007 2.785-3.578.655l-3.386-12.637c-.672-2.509.623-3.921 2.564-4.441l18.932-5.073c1.94-.52 3.769.055 4.441 2.564Zm-.877 10.736-2.562-9.561c-.089-.331-.436-.492-.768-.403l-17.749 4.756a.595.595 0 0 0-.415.72l2.561 9.56 18.933-5.072Z"
    />
  </svg>
);

const ユードットエフエム = ({ fill = "#fff" }) => (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="1368"
    height="622"
    fill="none"
    filter="url(#blur1)"
    viewBox="0 0 1368 622"
  >
    <path
      fill={fill}
      d="M1209.45 423.905c-31.12 8.071-47.87-4.791-47.61-29.935.52-25.505 19.48-63.419 34.97-93.216 15.69-30.995 48.28-88.202 55.38-97.93 12.36-16.933 30.68-6.233 20.08 11.052-19.14 31.13-38.27 62.539-55.58 95.137-23.16 43.678-27.09 61.614-27.89 66.686-3.24 15.459-.85 29.018 20.73 24.539 28.94-6.306 64.42-38.7 79.57-69.255-7.95-14.813 13.87-28.194 20.6-14.452 3.01 5.974 8.18 18.165 18.28 26.664 10.75 9.454 24.7 11.152 29.33 11.532 15.97 1.69 8.7 25.427-8.66 24.421-18.22-1.042-33.21-9.281-46.87-27.583-22.16 33.416-59.81 63.585-92.33 72.34ZM908.05 364.73c-13.971 5.27-17.897-14.426-4.32-20.699 5.05-2.411 24.163-9.287 54.679-19.388 29.699-9.89 49.031-14.888 57.831-16.336 15.39-2.601 16.45 18.942 1.96 22.137-10.95 2.28-25.319 4.063-57.165 14.784-15.153 4.747-41.16 15.063-52.985 19.502Zm-38.381 115.693c-14.002 5.002-18.292-15.428-3.323-21.785 5.353-2.213 38.015-13.145 93.241-30.189-.95-10.801-.964-23.224-6.596-52.973-2.861-15.277 20.427-22.404 22.925-7.862.914 5.563 3.417 25.075 4.721 53.734 61.543-18.126 88.193-25.294 96.693-26.94 15.06-3.067 18.02 17.984 3.02 21.588-4.08 1.056-39.41 8.26-106.524 29.206-64.661 20.312-90.155 30.219-104.157 35.221ZM638.031 600.537c-14.018 16.291-29.788-.85-17.326-15.299 43.882-50.786 91.732-115.171 113.981-163.579 19.058-41.001 9.748-50.472-20.802-44.85-26.462 4.812-55.381 20.537-77.599 32.758-17.132 9.433-23.756-11.867-6.654-21.862 18.174-10.567 56.657-27.716 84.448-33.453 54.208-11.392 65.194 19.565 44.831 67.183-14.236 33.157-58.055 106.147-120.879 179.102ZM376.145 503.041c-13.582 5.041-16.937-14.811-3.713-20.867 4.92-2.33 23.493-8.891 53.127-18.487 28.843-9.398 47.581-14.07 56.097-15.366 14.898-2.335 15.444 19.321 1.409 22.269-10.604 2.092-24.493 3.624-55.423 13.818-14.709 4.495-40.002 14.388-51.497 18.633ZM336.63 618.544c-13.606 4.771-17.296-15.825-2.729-21.94 5.208-2.126 36.93-12.518 90.534-28.641-.681-10.864-.425-23.341-5.205-53.321-2.425-15.394 20.177-22.133 22.268-7.483.76 5.604 2.748 25.245 3.381 54.052 59.721-17.097 85.562-23.816 93.79-25.316 14.587-2.809 16.981 18.386 2.441 21.735-3.959.987-38.17 7.586-103.315 27.415-62.77 19.236-87.559 28.727-101.165 33.499ZM694.474 269.924c-.989-25.924-1.55-59.765-3.831-101.461-2.268-41.45-4.563-74.424-5.845-97.863 3.202-18.1 21.923-12.582 22.949 1.684.891 11.8.323 27.829 2.563 68.785 25.662-2.094 46.124-.838 60.859 3.754 12.493 3.996 9.698 23.716-3.97 20.678-4.97-1.105-23.297-2.88-54.699-2.501 3.671 67.109 3.181 90.038 3.41 103.202 0 22.798-20.765 21.298-21.436 3.722ZM518.802 340.189c-6.407 14.233-22.357 8.279-17.339-6.2 9.057-25.331 48.618-94.548 64.672-117.243 9.48-13.242 26.076-4.603 17.183 9.637-3.678 5.384-10.037 13.087-28.038 43.317-15.378 26.223-23.38 42.241-36.478 70.489Zm-11.917-72.354c-6.576-6.417-10.207-15.498-9.729-25.528.733-10.655 14.382-15.224 15.851-4.793 1.116 8.245 4.874 13.045 8.074 17.691 6.352 7.887-6.768 19.702-14.196 12.63Zm-33.99 15.216c-6.879-7.197-9.757-18.436-9.015-28.81 1.271-11.063 15.194-15.695 16.399-4.92.862 8.87 4.972 15.857 7.888 20.285 6.401 9.292-8.079 21.704-15.272 13.445ZM265.348 429.5c-.246-7.029-.449-74.199-2.108-121.713-1.649-47.233-3.513-84.78-4.446-111.489-.569-16.306 21.632-21.148 22.475-4.905.745 13.432-.348 32.491 1.282 79.161 28.864-3.829 50.694 1.516 67.143 5.937 13.943 3.866 7.009 26.723-8.275 24.017-5.558-.984-22.535-4.717-57.808-2.525 2.67 76.472 3.671 111.149 3.644 126.176.051 17.277-21.592 22.273-21.907 5.341Zm100.444-213.975c-3.827-6.769-6.782-12.321-12.458-16.679-7.672-6.165 2.699-17.628 11.417-13.123 7.026 3.48 13.358 10.804 16.323 16.638 5.647 11.45-8.852 23.3-15.282 13.164Zm-29.058 22.013c-4.13-7.549-9.003-12.659-12.996-16.272-6.86-6.635 2.963-17.972 11.114-13.902 5.636 3.233 13.073 10.585 16.332 16.918 5.648 11.45-8.832 23.862-14.45 13.256ZM312.597 70.807c-20.072 6.958-26.275-18.62-8.078-23.236 18.743-5.675 35.314-11.028 65.058-20.759 26.425-8.48 43.724-15.243 63.113-22.607 18.765-6.583 26.514 19.453 8.135 24.422-20.652 5.922-37.485 11.35-63.387 19.679-23.63 7.377-43.201 15.093-64.841 22.5ZM13.303 192.323c-14.46 4.684-15.9-17.25-.928-22.889 28.136-10.598 106.125-34.934 113.31-38.53 4.482-15.824 6.692-30.109 8.807-45.254 1.641-12.048-4.084-16.484-22.312-11.568C96.391 78.34 77.497 86.45 60.703 93.69c-15.746 6.669-25.203-19.607-3.812-24.523C71.585 62.8 96.81 53.95 112.336 49.767c18.682-5.088 33.198-6.557 40.69-1.436 12.832 8.167 8.978 32.983 3.776 53.052-1.48 6.078-2.209 11.036-3.877 21.476 36.81-13.632 51.895-18.339 60.322-17.217 18.753 0 15.397 18.74.402 23.04-14.994 4.299-36.589 11.145-100.466 32.154-79.91 26.414-93.834 29.484-99.88 31.487Z"
    />
  </svg>
);
